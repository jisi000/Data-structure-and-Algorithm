统计每个节点的入度、作为起点时的全部终点。入度为零的节点可以使用，将其终点节点的入度减一。如果最终所有节点的入度都可以归零，那么有向图中没有环，否则有环。

```python
from collections import defaultdict,deque
n,m=map(int,input().split())
ind=[0]*n
d=defaultdict(list)
for _ in range(m):
    u,v=map(int,input().split())
    ind[v]+=1
    d[u].append(v)
queue=deque()
visited=set()
for i in range(n):
    if ind[i]==0:
        queue.append(i)
        visited.add(i)
while queue:
    re=queue.popleft()
    for idx in d[re]:
        ind[idx]-=1
    for i in range(n):
        if i not in visited and ind[i]==0:
            queue.append(i)
            visited.add(i)
if sum(ind)>0:
    print('Yes')
else:
    print('No')
```

