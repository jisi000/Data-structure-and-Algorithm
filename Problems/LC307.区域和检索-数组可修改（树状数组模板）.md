![树状数组入门树状数组教程树状数组详细讲解](https://pic.leetcode.cn/1717549976-yUVqsj-lc307.png)

每个小区间的长度就是右端点的lowbit值。根据这个特征和图示就可以构建和使用树状数组。注意树状数组的索引从1开始。

```python
class NumArray:
    def lowbit(self,x):
        return x&-x

    def __init__(self, nums: List[int]):
        self.n=len(nums)
        self.nums=nums
        self.tree=[0]*(self.n+1)
        for i,num in enumerate(nums,1):
            self.tree[i]+=num
            nxt=i+self.lowbit(i)
            if nxt<=self.n:
                self.tree[nxt]+=self.tree[i]
    def update(self, index: int, val: int) -> None:
        delta=val-self.nums[index]
        self.nums[index]=val
        index+=1
        while index<=self.n:
            self.tree[index]+=delta
            index+=self.lowbit(index)

    def get_pre(self,index:int) -> int:
        index+=1
        ans=0
        while index>0:
            ans+=self.tree[index]
            index-=self.lowbit(index)
        return ans

    def sumRange(self, left: int, right: int) -> int:
        return self.get_pre(right)-self.get_pre(left-1)


# Your NumArray object will be instantiated and called as such:
# obj = NumArray(nums)
# obj.update(index,val)
# param_2 = obj.sumRange(left,right)
```

