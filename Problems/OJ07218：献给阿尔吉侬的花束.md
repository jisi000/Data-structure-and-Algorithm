一道经典的bfs

```python
from collections import deque
d=[(0,1),(1,0),(-1,0),(0,-1)]
def bfs(start):
    queue=deque([(start,0)])
    visited={start}
    while queue:
        loc,dis=queue.popleft()
        x,y=loc
        if graph[x][y]=='E':
            return dis
        for dx,dy in d:
            a,b=x+dx,y+dy
            if 0<=a<r and 0<=b<c and (a,b) not in visited and graph[a][b]!='#':
                visited.add((a,b))
                queue.append(((a,b),dis+1))
    return 'oop!'
T=int(input())
for _ in range(T):
    r,c=map(int,input().split())
    graph=[list(input()) for _ in range(r)]
    for i in range(r):
        for j in range(c):
            if graph[i][j]=='S':
                print(bfs((i,j)))
```

