在向前缀树中添加字符串时，需要检出字符串有没有前缀，是不是别人的前缀。

若有前缀或者有完全相同的字符串，节点的is_end会返回True；若是别人的前缀，尾节点会有子节点。

在main()函数中，如果在输入元素的中途检出前缀，需要把本组剩余的数据输入再返回False，防止数据输入混乱。

```python
class Node:
    def __init__(self):
        self.children={}
        self.is_end=False
class Tire:
    def __init__(self):
        self.root=Node()
    def add(self,s):
        re=self.root
        for ch in s:
            if ch not in re.children:
                re.children[ch]=Node()
            re=re.children[ch]
            if re.is_end:
                return False
        if len(re.children)>0:
            return False
        re.is_end=True
        return True
def main():
    n=int(input())
    tree=Tire()
    for i in range(n):
        number=input()
        if not tree.add(number):
            for j in range(i+1,n):
                input()
            return False
    return True
t=int(input())
for _ in range(t):
    if main():
        print('YES')
    else:
        print('NO')
```

