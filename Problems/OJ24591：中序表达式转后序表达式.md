先解决输入数据整数、小数、符号混杂的问题。利用数字都被符号隔开的性质，将每个数字合并成一个小字符串存储，符号都单独存储。

分别解决运算顺序问题：

**括号里的优先运算：**使用stack，当遇到')'，将最近的'('之后的部分pop出去，先转为后序表达式，然后将这个后序表达式合并为一个字符串存回来。

**从左到右，先乘除后加减：**定义trans函数，从左到右寻找第一个运算符号，

如果是乘除，直接将符号及其左右的部分（数字或已经合并为字符串的后序表达式）转为一个合并的后序表达式，再递归处理新的表达式。

如果是加减，分类讨论：如果后面的第一个符号也是加减或后面没有符号，同上。

如果后面第一个符号为乘除，先把该符号及左右部分转为后序表达式，再递归处理。

递归的结束条件是式子中不存在单独的符号（符号都以合并成字符串的后序表达式存在）

```python
def trans(s):
    ans=s
    for i in range(len(s)):
        if s[i] in ['*','/']:
            ans=trans([' '.join(s[:i]+[s[i+1],s[i]])]+s[i+2:])
            break
        elif s[i] in ['+','-']:
            if i+2<len(s) and s[i+2] in ['*','/']:
                ans=trans(s[:i+1]+[' '.join([s[i+1],s[i+3],s[i+2]])]+s[i+4:])
            else:
                ans=trans([' '.join(s[:i]+[s[i+1],s[i]])]+s[i+2:])
            break
    return ans
n=int(input())
for _ in range(n):
    stack=[]
    inp=input()
    n_inp=[]
    stu=0 if inp[0].isdigit() else 1
    re=''
    for ch in inp:
        if ch.isdigit() or ch=='.':
            if stu==0:
                re+=ch
            else:
                if re:
                    n_inp.append(re)
                re=ch
                stu=0
        else:
            if stu==0:
                if re:
                    n_inp.append(re)
                re=ch
                stu=1
            else:
                if re:
                    n_inp.append(re)
                re=ch
    if re:
        n_inp.append(re)
    for ch in n_inp:
        if ch==')':
            st=[]
            while stack:
                re=stack.pop()
                if re=='(':
                    break
                st=[re]+st
            stack.append(' '.join(trans(st)))
        else:
            stack.append(ch)
    back=trans(stack)
    print(*back)
```

